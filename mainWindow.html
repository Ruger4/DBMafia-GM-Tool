<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Dank Brigade Mafia GM Tool</title>
        <link rel="stylesheet" href="./assets/style.css">
        <script src="./assets/js/messageManager.js" type="text/javascript"></script>
        <script src="./assets/js/globals.js" type="text/javascript"></script>
        <script src="./assets/js/actions.js" type="text/javascript"></script>
        <script src="./assets/js/roles.js" type="text/javascript"></script>
        <script src="./assets/js/playerSetup.js" type="text/javascript"></script>
        <script src="./assets/js/gameSetup.js" type="text/javascript"></script>
        <script src="./assets/js/game.js" type="text/javascript"></script>
    </head>
    <body>
        <div id="content">
            <div class="dragBar">
                <div class="titleCSS">Ruger's DBMafia GM Tool</div>
                <div class="minimCSS" id="minimize">-</div>
                <div class="closeCSS" id="close">X</div>
            </div>
            <div id="main" class="main">
                <div id="gameDiv" style="display: none;">
                    <div id="messengerDivID" class="cons-div jcc" style="display: none;">
                        <div class = "text">Pending GM Actions/Messages</div>
                    </div>
                    <ol id="messageListID" class="ol nls"></ol>
                    <div class="game-div flex-row jcc">
                        <button class="btn btn-add mrlp5 fg1" onclick="createConsoleWin()">Console</button>
                        <div id="gameHeaderDivID" class="text-Large fg100">text</div>
                    </div>
                    <ol id="VillageListID" class="ol nls"></ol>
                    <ol id="NobodyListID" class="ol nls"></ol>
                    <ol id="CultListID" class="ol nls"></ol>
                    <ol id="MafiaListID" class="ol nls"></ol>
                    <ol id="DeadListID" class="ol nls"></ol>
                    <div class="game-div jcc">
                        <div id="gameFooterDivID" class="text">Configure ALL requested actions then: </div>
                        <button id="calculateButtonID" class="btn btn-run mrlp5" onclick='runGameCycle()'>text</button>
                    </div>
                    <div id="gameLogID" class="gl glBorder">
                        <header class="glHeader">GAME LOG</header>
                    </div>
                </div>
                <script type="text/javascript">
                    const electron = require('electron');
                    const url = require('url');
                    const path = require('path');
                    const BrowserWindow = electron.remote.BrowserWindow;
                    let consoleWin = null;
                    function createConsoleWin(){
                        // Create new window
                        consoleWin = new BrowserWindow({
                            width: 440,
                            height: 320,
                            title: 'Console'//,
                            //frame: false
                        });
                        // load html into window
                        consoleWin.loadURL(url.format({
                            pathname: path.join(__dirname, 'consoleWindow.html'),
                            protocol:'file:',
                            slashes: true
                        }));
                        // garbage collection handle
                        consoleWin.on('close', function(){
                            consoleWin = null;
                        });
                    }
                    playerSetup();
                </script>
            </div>
        </div>
        <script src="./assets/js/script.js"></script>
    </body>
</html>